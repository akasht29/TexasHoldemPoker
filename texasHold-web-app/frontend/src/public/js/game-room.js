const CardImageLinks = [
  "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/English_pattern_ace_of_clubs.svg/800px-English_pattern_ace_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/English_pattern_2_of_clubs.svg/800px-English_pattern_2_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/English_pattern_3_of_clubs.svg/800px-English_pattern_3_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/English_pattern_4_of_clubs.svg/800px-English_pattern_4_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/English_pattern_5_of_clubs.svg/800px-English_pattern_5_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/English_pattern_6_of_clubs.svg/800px-English_pattern_6_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/English_pattern_7_of_clubs.svg/800px-English_pattern_7_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/English_pattern_8_of_clubs.svg/800px-English_pattern_8_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/English_pattern_9_of_clubs.svg/800px-English_pattern_9_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/English_pattern_10_of_clubs.svg/800px-English_pattern_10_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/English_pattern_jack_of_clubs.svg/800px-English_pattern_jack_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/English_pattern_queen_of_clubs.svg/800px-English_pattern_queen_of_clubs.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/English_pattern_king_of_clubs.svg/800px-English_pattern_king_of_clubs.svg.png",

  "https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/English_pattern_ace_of_diamonds.svg/800px-English_pattern_ace_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/English_pattern_2_of_diamonds.svg/800px-English_pattern_2_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/English_pattern_3_of_diamonds.svg/800px-English_pattern_3_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/English_pattern_4_of_diamonds.svg/800px-English_pattern_4_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/English_pattern_5_of_diamonds.svg/800px-English_pattern_5_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/English_pattern_6_of_diamonds.svg/800px-English_pattern_6_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/English_pattern_7_of_diamonds.svg/800px-English_pattern_7_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/English_pattern_8_of_diamonds.svg/800px-English_pattern_8_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/English_pattern_9_of_diamonds.svg/800px-English_pattern_9_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/English_pattern_10_of_diamonds.svg/800px-English_pattern_10_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/English_pattern_jack_of_diamonds.svg/800px-English_pattern_jack_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/English_pattern_queen_of_diamonds.svg/800px-English_pattern_queen_of_diamonds.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/English_pattern_king_of_diamonds.svg/800px-English_pattern_king_of_diamonds.svg.png",

  "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/English_pattern_ace_of_hearts.svg/800px-English_pattern_ace_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/English_pattern_2_of_hearts.svg/800px-English_pattern_2_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/English_pattern_3_of_hearts.svg/800px-English_pattern_3_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/English_pattern_4_of_hearts.svg/800px-English_pattern_4_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/English_pattern_5_of_hearts.svg/800px-English_pattern_5_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/English_pattern_6_of_hearts.svg/800px-English_pattern_6_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/English_pattern_7_of_hearts.svg/800px-English_pattern_7_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/English_pattern_8_of_hearts.svg/800px-English_pattern_8_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/English_pattern_9_of_hearts.svg/800px-English_pattern_9_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/English_pattern_10_of_hearts.svg/800px-English_pattern_10_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/English_pattern_jack_of_hearts.svg/800px-English_pattern_jack_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/English_pattern_queen_of_hearts.svg/800px-English_pattern_queen_of_hearts.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/English_pattern_king_of_hearts.svg/800px-English_pattern_king_of_hearts.svg.png",

  "https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/English_pattern_ace_of_spades.svg/800px-English_pattern_ace_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/English_pattern_2_of_spades.svg/800px-English_pattern_2_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/English_pattern_3_of_spades.svg/800px-English_pattern_3_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/English_pattern_4_of_spades.svg/800px-English_pattern_4_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/English_pattern_5_of_spades.svg/800px-English_pattern_5_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/English_pattern_6_of_spades.svg/800px-English_pattern_6_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/English_pattern_7_of_spades.svg/800px-English_pattern_7_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/English_pattern_8_of_spades.svg/800px-English_pattern_8_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/English_pattern_9_of_spades.svg/800px-English_pattern_9_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/English_pattern_10_of_spades.svg/800px-English_pattern_10_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/English_pattern_jack_of_spades.svg/800px-English_pattern_jack_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/English_pattern_queen_of_spades.svg/800px-English_pattern_queen_of_spades.svg.png",
  "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/English_pattern_king_of_spades.svg/800px-English_pattern_king_of_spades.svg.png",
];

import socket from "./common/index.js";

const messageForm = document.getElementById("send-container");
const messageInput = document.getElementById("message-input");
const foldButton = document.getElementById("fold-button");
const callButton = document.getElementById("call-button");
const raiseButton = document.getElementById("raise-button");
const allInButton = document.getElementById("all-in-button");

socket.on("error", function (err) {
  console.log(err);
});

socket.on("GAME_STARTING", function (destination) {
  window.location.href = destination;
});

socket.on("CHAT_MESSAGE", ({ username, message }) => {
  console.log("message recieved");
  appendMessage(`${username}: `, `${message}`);
});

socket.on("SESSION_ERROR", () => {
  console.log("SESSION_ERROR");
  appendMessage(`Server: `, `Browser session error`);
});

socket.on("PLAYER_JOINED", ({ username }) => {
  console.log(username + " connected ");
  appendMessage(`${username} `, `connected`);
});

socket.on("PLAYER_LEFT", ({ username }) => {
  console.log(username + " disconnected ");
  appendMessage(`${username} `, `disconnected`);
});

socket.on("addCardToHand", ({ placeholder1, placeholder2 }) => {
  console.log("addCardToHand");
  addCardToHand(`${placeholder1}`);
});

socket.on("clearHand", ({ placeholder1, placeholder2 }) => {
  console.log("clearHand");
  clearHand(`${placeholder1}`);
});

socket.on("addCardToTable", ({ placeholder1, placeholder2 }) => {
  console.log("addCardToTable");
  addCardToTable(`${placeholder1}`);
});

socket.on("clearTable", ({ placeholder1, placeholder2 }) => {
  console.log("clearTable");
  clearTable(`${placeholder1}`);
});

//Chat event
messageForm.addEventListener("submit", (e) => {
  e.preventDefault();
  const message = messageInput.value;

  fetch("/chat/0", {
    method: "post",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message }),
  });

  messageInput.value = "";
});

function appendMessage(username, message) {
  const chatDiv = document.getElementById("chat-view");
  const newMessageDiv = document.createElement("div");
  if (message === `connected`) {
    newMessageDiv.style = "color:green;font-size: 16px; padding-bottom: 2px;";
  } else if (message === `disconnected`) {
    newMessageDiv.style = "color:red;font-size: 16px; padding-bottom: 2px;";
  } else if (username === `Server: `) {
    newMessageDiv.style = "color:orange;font-size: 16px; padding-bottom: 2px;";
  } else {
    newMessageDiv.style = "font-size: 16px; padding-bottom: 2px;";
  }

  const newMessageText = document.createTextNode(`${username}${message}`);
  newMessageDiv.appendChild(newMessageText);
  chatDiv.prepend(newMessageDiv);
}

function addCardToHand(key) {
  let handDiv = document.getElementById("hand-cards");
  let newCardImg = new Image();
  newCardImg.src = CardImageLinks[key];
  newCardImg.id = key;
  newCardImg.alt = key;
  newCardImg.style = "height: 90%; padding-left: 0.5em; padding-right: 0.5em;";
  handDiv.appendChild(newCardImg);
}

function clearHand() {
  const handDiv = document.getElementById("hand-cards");
  handDiv.innerHTML = "";
}

function addCardToTable(key) {
  let handDiv = document.getElementById("table-cards");
  let newCardImg = new Image();
  newCardImg.src = CardImageLinks[key];
  newCardImg.id = key;
  newCardImg.alt = key;
  newCardImg.style = "height: 90%; padding-left: 0.5em; padding-right: 0.5em;";
  handDiv.appendChild(newCardImg);
}

function clearTable() {
  const handDiv = document.getElementById("hand-cards");
  handDiv.innerHTML = "";
}

foldButton.addEventListener("click", () => {
  fetch(`${baseUrl}/poker/${gameId}/fold`, {
    method: "HEAD",
  })
    .then((response) => {
      console.log(response);
    })
    .catch((error) => {
      console.log(error.message);
    });
});

callButton.addEventListener("click", () => {
  fetch(`${baseUrl}/poker/${gameId}/call`, {
    method: "HEAD",
  })
    .then((response) => {
      console.log(response);
    })
    .catch((error) => {
      console.log(error.message);
    });
});

raiseButton.addEventListener("click", () => {
  fetch(`${baseUrl}/poker/${gameId}/raise`, {
    method: "POST",
  })
    .then((response) => {
      console.log(response);
    })
    .catch((error) => {
      console.log(error.message);
    });
});

allInButton.addEventListener("click", () => {
  fetch(`${baseUrl}/poker/${gameId}/allIn`, {
    method: "HEAD",
  })
    .then((response) => {
      console.log(response);
    })
    .catch((error) => {
      console.log(error.message);
    });
});
